import{r as o,j as e,c as m,R as p}from"./client-B9F7oGqJ.js";import{D as x,g as b,i as g,s as j}from"./storage-NNWWAa_K.js";const v=[{id:"apa",label:"APA (7th Edition)"},{id:"mla",label:"MLA (9th Edition)"},{id:"chicago",label:"Chicago (Author-Date)"},{id:"ieee",label:"IEEE"},{id:"harvard",label:"Harvard"},{id:"vancouver",label:"Vancouver"}];function S(){const[a,n]=o.useState(x),[l,i]=o.useState(""),[u,d]=o.useState(!0);if(o.useEffect(()=>{b().then(t=>{n(t),d(!1)})},[]),u)return e.jsx("main",{className:"options-root",children:e.jsx("p",{children:"Loading settings..."})});const h=async t=>{t.preventDefault();const s=a.apiBaseUrl.trim();if(!g(s)){i("Enter a valid API base URL, such as http://localhost:3000");return}const r={...a,apiBaseUrl:s,debounceMs:Math.max(300,Math.min(5e3,Number(a.debounceMs)||1500)),maxResults:Math.max(1,Math.min(10,Number(a.maxResults)||5))};await j(r),n(r),i("Saved. New lookups will use these settings.")};return e.jsx("main",{className:"options-root",children:e.jsxs("section",{className:"options-panel",children:[e.jsx("p",{className:"eyebrow",children:"Source Finder"}),e.jsx("h1",{children:"Extension Settings"}),e.jsx("p",{className:"lead",children:"Configure your local backend, citation style, and lookup behavior."}),e.jsxs("form",{onSubmit:h,className:"options-form",children:[e.jsxs("label",{children:["Backend API Base URL",e.jsx("input",{type:"url",value:a.apiBaseUrl,onChange:t=>{n(s=>({...s,apiBaseUrl:t.target.value}))},placeholder:"http://localhost:3000",required:!0})]}),e.jsxs("label",{children:["Citation Style",e.jsx("select",{value:a.style,onChange:t=>{n(s=>({...s,style:t.target.value}))},children:v.map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))})]}),e.jsxs("label",{children:["Auto Lookup Debounce (ms)",e.jsx("input",{type:"number",min:300,max:5e3,step:100,value:a.debounceMs,onChange:t=>{n(s=>({...s,debounceMs:Number(t.target.value)}))}})]}),e.jsxs("label",{children:["Max Results",e.jsx("input",{type:"number",min:1,max:10,step:1,value:a.maxResults,onChange:t=>{n(s=>({...s,maxResults:Number(t.target.value)}))}})]}),e.jsxs("label",{className:"checkbox",children:[e.jsx("input",{type:"checkbox",checked:a.debugMode,onChange:t=>{n(s=>({...s,debugMode:t.target.checked}))}}),"Enable debug logs in the background worker console."]}),e.jsx("button",{type:"submit",children:"Save Settings"})]}),l?e.jsx("p",{className:"status",children:l}):null]})})}const c=document.getElementById("root");if(!c)throw new Error("Missing #root element for options page.");m(c).render(e.jsx(p.StrictMode,{children:e.jsx(S,{})}));
